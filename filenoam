from collections import defaultdict

def min_max_normalize(dictionary):
    # Find the minimum and maximum values in the dictionary's values
    min_value = min(dictionary.values())
    max_value = max(dictionary.values())
    
    # Normalize each value using the min-max formula
    for key in dictionary:
        dictionary[key] = (dictionary[key] - min_value) / (max_value - min_value)
    
    return dictionary

def search_anchor(query, index):
    dict_cosine_sim = defaultdict(float)
    query_dict = dict(term_frequency(query, 0))
    query_list_keys = list(query_dict.keys())
    index_df_list_keys = list(index.df.keys())

    for term in query_list_keys:
        if term in index_df_list_keys:
            posting_list = index.read_a_posting_list(".", term, "noam209263805")
            for doc_id, freq in posting_list:
                dict_cosine_sim[doc_id] += freq

    # Normalize the values in dict_cosine_sim
    dict_cosine_sim_normalized = min_max_normalize(dict_cosine_sim)

    sorted_docs = sorted(dict_cosine_sim_normalized.items(), key=lambda x: x[1], reverse=True)
    top_100_docs = sorted_docs[:100]

    return top_100_docs
